import {
  E as E2,
  L as L2,
  N,
  O,
  P,
  S as S2,
  T as T2,
  b as b2,
  m,
  v as v2,
  w
} from "./chunk-NLX4ICU2.js";
import {
  $r,
  Bs,
  Ds,
  Fs,
  Hs,
  Ia,
  Jr,
  Js,
  Li,
  Ls,
  Mi,
  Ni,
  Ns,
  Os,
  Ps,
  Rs,
  Si,
  Ws,
  Yr,
  Zr,
  Zs,
  ai,
  ci,
  ii,
  js,
  ki,
  ks,
  ma,
  ni,
  oi,
  ri,
  ti,
  ui,
  wi,
  xi,
  xs
} from "./chunk-TTFJWE4I.js";
import {
  $o,
  Ar,
  C,
  De,
  Dr,
  E,
  Fe,
  Fr,
  Go,
  Gr,
  H,
  Ho,
  Ie,
  Je,
  Ko,
  Ks,
  L,
  M,
  Qo,
  Rr,
  S,
  T,
  Ve,
  Vo,
  Xr,
  Yo,
  _,
  a,
  ae,
  as,
  b,
  be,
  c,
  cs,
  d,
  ds,
  ee,
  et,
  f,
  fs,
  hs,
  jo,
  k,
  kr,
  l,
  lo,
  ls,
  n,
  ne,
  nt,
  o,
  oe,
  p,
  q,
  qe,
  r,
  re,
  s,
  se,
  t,
  ue,
  uo,
  v,
  ve,
  we,
  xr,
  ze,
  zo
} from "./chunk-KXGQOUB2.js";

// node_modules/@sendbird/chat/poll.js
var f2 = function(r2) {
  function f3() {
    var t2 = null !== r2 && r2.apply(this, arguments) || this;
    return t2.name = "poll", t2;
  }
  return t(f3, r2), f3.prototype.init = function(t2, a3) {
    var n2 = a3.sdkState, o2 = a3.dispatcher, i = a3.sessionManager, s3 = a3.requestQueue, l2 = a3.logger, u2 = a3.onlineDetector, c2 = a3.cacheContext;
    r2.prototype.init.call(this, t2, { sdkState: n2, dispatcher: o2, sessionManager: i, requestQueue: s3, logger: l2, onlineDetector: u2, cacheContext: c2 }), this._manager = new Qo(t2, { sdkState: n2, dispatcher: o2, sessionManager: i, requestQueue: s3, logger: l2, onlineDetector: u2, cacheContext: c2 });
  }, f3.prototype.create = function(t2) {
    return r(this, void 0, void 0, function() {
      var e2;
      return s(this, function(a3) {
        return e2 = n(n({}, Ho), t2), cs(Vo(e2)).throw(b.invalidParameters), [2, this._manager.create(e2)];
      });
    });
  }, f3.prototype.get = function(t2) {
    return r(this, void 0, void 0, function() {
      var e2;
      return s(this, function(a3) {
        return e2 = n(n({}, jo), t2), cs(Ko(e2)).throw(b.invalidParameters), [2, this._manager.get(e2)];
      });
    });
  }, f3.prototype.getOption = function(t2) {
    return r(this, void 0, void 0, function() {
      var e2;
      return s(this, function(a3) {
        return e2 = n(n({}, zo), t2), cs(Go(e2)).throw(b.invalidParameters), [2, this._manager.getOption(e2)];
      });
    });
  }, f3.prototype.buildPollFromSerializedData = function(t2) {
    return this._manager.buildPollFromSerializedData(t2);
  }, f3;
}(lo);

// node_modules/@sendbird/chat/lib/__bundle-b9daad0a.js
var e = function(t2) {
  return ["-lastMessageUpdatedAt", "-createdAt", "syncIndex"];
};
var a2 = function(n2) {
  function e2() {
    return null !== n2 && n2.apply(this, arguments) || this;
  }
  return t(e2, n2), e2;
}(re);

// node_modules/@sendbird/chat/index.js
var St = function(e2) {
  this.key = e2.key, this.url = e2.url;
};
var It = function(e2) {
  this.id = e2.id, this.name = e2.name, this.url = e2.url, this.emojis = e2.emojis ? e2.emojis.map(function(e3) {
    return new St(e3);
  }) : [];
};
var Ct = function(e2) {
  this.emojiHash = e2.emoji_hash || "", this.emojiCategories = e2.emoji_categories ? e2.emoji_categories.map(function(e3) {
    return new It(e3);
  }) : [];
};
var Et2 = { profileImage: void 0, profileUrl: void 0, nickname: void 0 };
var Tt = function(e2) {
  return { v2: function() {
    return r(void 0, void 0, void 0, function() {
      return s(this, function(t2) {
        switch (t2.label) {
          case 0:
            return [4, e2.commitSchema([{ collectionName: Yr, keyName: Jr, index: [b2(E2.LATEST_LAST_MESSAGE), b2(E2.CHRONOLOGICAL), b2(E2.CHANNEL_NAME_ALPHABETICAL)] }, { collectionName: Zr, keyName: $r, index: [Bs(Ls.CHANNEL_LATEST), Bs(Ls.NEWEST_CHILD_MESSAGE)] }, { collectionName: Hs, keyName: Ws, index: [Bs(Ls.CHANNEL_LATEST), Bs(Ls.NEWEST_CHILD_MESSAGE)] }, { collectionName: ri, keyName: ii }])];
          case 1:
            return [2, t2.sent()];
        }
      });
    });
  }, v3: function() {
    return r(void 0, void 0, void 0, function() {
      return s(this, function(t2) {
        switch (t2.label) {
          case 0:
            return [4, e2.commitSchema([{ collectionName: ai, keyName: oi, index: [e("latest_last_message")] }])];
          case 1:
            return [2, t2.sent()];
        }
      });
    });
  }, v4: function() {
    return r(void 0, void 0, void 0, function() {
      return s(this, function(t2) {
        switch (t2.label) {
          case 0:
            return [4, e2.commitSchema([{ collectionName: ti, keyName: ni, index: [js()] }])];
          case 1:
            return [2, t2.sent()];
        }
      });
    });
  }, v5: function() {
    return r(void 0, void 0, void 0, function() {
      return s(this, function(t2) {
        switch (t2.label) {
          case 0:
            return [4, e2.commitSchema([{ collectionName: ui, keyName: ci, index: [["-userId", "-updatedAt"]] }])];
          case 1:
            return [2, t2.sent()];
        }
      });
    });
  } };
};
var Pt = function(e2) {
  var t2 = new Fs();
  return function(n2, s3) {
    return r(void 0, void 0, void 0, function() {
      var r2, a3, u2, c2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            switch (n2) {
              case 1:
              case 2:
              case 3:
              case 4:
                return [3, 1];
              case 5:
                return [3, 2];
              case 6:
                return [3, 4];
              case 7:
                return [3, 11];
            }
            return [3, 15];
          case 1:
            return s3(), [3, 16];
          case 2:
            return [4, e2.reset()];
          case 3:
            return i.sent(), s3(), [3, 16];
          case 4:
            return i.trys.push([4, 9, , 10]), r2 = Tt(e2), a3 = r2.v2, u2 = r2.v3, c2 = r2.v4, [4, a3()];
          case 5:
            return i.sent(), [4, u2()];
          case 6:
            return i.sent(), [4, c2()];
          case 7:
            return i.sent(), [4, e2.collection(Zr).removeIf({ where: { channelType: H.OPEN } })];
          case 8:
            return i.sent(), [3, 10];
          case 9:
            return i.sent(), t2.warn("Failed to migrate to v2, v3, v4"), [3, 10];
          case 10:
            return s3(), [3, 16];
          case 11:
            return i.trys.push([11, 13, , 14]), [4, (0, Tt(e2).v5)()];
          case 12:
            return i.sent(), [3, 14];
          case 13:
            return i.sent(), t2.warn("Failed to migrate to v5"), [3, 14];
          case 14:
            return s3(), [3, 16];
          case 15:
            s3(), i.label = 16;
          case 16:
            return [2];
        }
      });
    });
  };
};
var Dt = function() {
  return "undefined" != typeof document ? document.visibilityState : "visible";
};
var Ut = function(e2) {
  function t2(t3) {
    var n2 = t3.getVisibilityState, r2 = void 0 === n2 ? Dt : n2, i = t3.initialState, s3 = void 0 === i ? "visible" : i, o2 = t3.isEnabled, a3 = void 0 === o2 || o2, u2 = t3.pauseCheckDelay, c2 = void 0 === u2 ? 3e4 : u2, d2 = e2.call(this) || this;
    return d2._pauseCheckDelay = 3e4, d2._currentState = "visible", d2._getVisibilityState = r2, d2._pauseCheckDelay = c2, d2._currentState = s3, d2._isEnabled = a3, d2._boundToggleState = d2._toggleState.bind(d2), d2;
  }
  return t(t2, e2), Object.defineProperty(t2.prototype, "currentState", { get: function() {
    return this._currentState;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "isAvailable", { get: function() {
    return "undefined" != typeof window && !!window.addEventListener && !!window.removeEventListener;
  }, enumerable: false, configurable: true }), t2.prototype._toggleState = function() {
    var e3 = this, t3 = this._getVisibilityState();
    "hidden" !== t3 ? "hidden" === this._currentState && (this._pauseDelayTimer && (clearTimeout(this._pauseDelayTimer), this._pauseDelayTimer = void 0), this.dispatch("resume")) : "hidden" !== this._currentState && (this._pauseDelayTimer = setTimeout(function() {
      e3._pauseDelayTimer = void 0, e3.dispatch("pause");
    }, this._pauseCheckDelay)), this._currentState = t3;
  }, t2.prototype.start = function() {
    this._isEnabled && this.isAvailable && (this._boundToggleState = this._toggleState.bind(this), window.addEventListener("visibilitychange", this._boundToggleState, { capture: true }));
  }, t2.prototype.stop = function() {
    this._isEnabled && this.isAvailable && this._boundToggleState && window.removeEventListener("visibilitychange", this._boundToggleState, { capture: true });
  }, t2;
}(ne);
var Ot = function() {
  function e2(e3) {
    var t2 = e3.logger, n2 = e3.connectionDelegate, r2 = void 0 === n2 ? null : n2, i = this;
    this._onlineWorker = function() {
      var e4;
      return null === (e4 = i.connectionDelegate) || void 0 === e4 ? void 0 : e4.reconnect();
    }, this._offlineWorker = function() {
      var e4;
      return null === (e4 = i.connectionDelegate) || void 0 === e4 ? void 0 : e4.disconnect();
    }, this.unsubscribes = [], this._onlineListener = function(e4) {
      if (i.isAvailableOnWeb)
        return window.addEventListener("online", e4), function() {
          return window.removeEventListener("online", e4, false);
        };
    }, this._offlineListener = function(e4) {
      if (i.isAvailableOnWeb)
        return window.addEventListener("offline", e4), function() {
          return window.removeEventListener("offline", e4, false);
        };
    }, this.logger = t2, r2 && (this.connectionDelegate = r2);
  }
  return Object.defineProperty(e2.prototype, "isAvailableOnWeb", { get: function() {
    return "undefined" != typeof window && !!window.addEventListener && "ononline" in window && "onoffline" in window && "undefined" != typeof navigator && void 0 !== navigator.onLine;
  }, enumerable: false, configurable: true }), e2.prototype.setOnlineListener = function(e3) {
    Boolean(e3) && "function" == typeof e3 && (this._onlineListener = e3);
  }, e2.prototype.setOfflineListener = function(e3) {
    Boolean(e3) && "function" == typeof e3 && (this._offlineListener = e3);
  }, e2.prototype.start = function() {
    this.unsubscribes = [this._onlineListener(this._onlineWorker), this._offlineListener(this._offlineWorker)];
  }, e2.prototype.stop = function() {
    var e3 = this;
    this.unsubscribes.forEach(function(t2) {
      try {
        null == t2 || t2();
      } catch (t3) {
        e3.logger.warn(t3.message);
      }
    }), this.unsubscribes = [];
  }, e2.prototype.isOnline = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e3) {
        return this.isAvailableOnWeb ? [2, navigator.onLine] : [2, new Promise(function(e4) {
          fetch("https://www.google.com", { method: ae.GET, mode: "no-cors" }).then(function() {
            return e4(true);
          }).catch(function() {
            return e4(false);
          });
        })];
      });
    });
  }, e2;
}();
var At = function(e2) {
  function t2(t3) {
    var n2, r2 = this;
    return (r2 = e2.call(this) || this).method = ae.GET, r2.path = De, r2.params = se(oe({ ts: "number" == typeof t3.token ? t3.token : void 0, token: "string" == typeof t3.token ? t3.token : void 0, limit: null !== (n2 = t3.limit) && void 0 !== n2 ? n2 : 100 })), r2;
  }
  return t(t2, e2), t2;
}(Fe);
var Nt = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.configs = n2.configs, r2.hasMore = n2.has_more, r2.nextToken = n2.next, r2.ts = n2.ts, r2;
  }
  return t(t2, e2), t2;
}(qe);
var Mt = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.nickname, i = t3.profileUrl, s3 = t3.profileImage, o2 = t3.preferredLanguages, a3 = e2.call(this) || this;
    return a3.method = ae.PUT, a3.path = "".concat(ue, "/").concat(encodeURIComponent(n2)), a3.params = se(oe({ nickname: r2, profile_url: i, profile_file: s3, preferred_languages: o2 })), a3;
  }
  return t(t2, e2), t2;
}(Fe);
var Lt = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.user = new ls(t3, n({}, n2)), r2;
  }
  return t(t2, e2), t2;
}(qe);
var Rt = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.token, i = t3.deviceOS, s3 = t3.deviceManufacturer, o2 = t3.systemPushEnabled, a3 = e2.call(this) || this;
    return a3.method = ae.POST, a3.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push/apns"), a3.params = se({ apns_device_token: r2, always_push: true, device_os: i, device_manufacturer: s3, system_push_enabled: o2 }), a3;
  }
  return t(t2, e2), t2;
}(Fe);
!function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.token = n2.token, r2.type = n2.type ? f[n2.type.toLowerCase()] : f.UNKNOWN, r2.user = new ls(t3, n2.user), r2;
  }
  t(t2, e2);
}(qe);
var zt = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.token, i = t3.deviceOS, s3 = t3.deviceManufacturer, o2 = t3.systemPushEnabled, a3 = e2.call(this) || this;
    return a3.method = ae.POST, a3.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push/gcm"), a3.params = se({ gcm_reg_token: r2, always_push: true, device_os: i, device_manufacturer: s3, system_push_enabled: o2 }), a3;
  }
  return t(t2, e2), t2;
}(Fe);
!function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.token = n2.token, r2.type = n2.type ? f[n2.type.toLowerCase()] : f.UNKNOWN, r2.user = new ls(t3, n2.user), r2;
  }
  t(t2, e2);
}(qe);
var Qt2 = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.token, i = e2.call(this) || this;
    return i.method = ae.DELETE, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push/apns/").concat(encodeURIComponent(r2)), i;
  }
  return t(t2, e2), t2;
}(Fe);
!function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.token = n2.token, r2.user = new ls(t3, n2.user), r2.lastDeletedAt = n2.device_token_last_deleted_at, r2;
  }
  t(t2, e2);
}(qe);
var Ft = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.token, i = e2.call(this) || this;
    return i.method = ae.DELETE, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push/gcm/").concat(encodeURIComponent(r2)), i;
  }
  return t(t2, e2), t2;
}(Fe);
!function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.token = n2.token, r2.user = new ls(t3, n2.user), r2.lastDeletedAt = n2.device_token_last_deleted_at, r2;
  }
  t(t2, e2);
}(qe);
var jt = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = e2.call(this) || this;
    return r2.method = ae.DELETE, r2.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push/apns"), r2;
  }
  return t(t2, e2), t2;
}(Fe);
!function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.type = n2.type ? f[n2.type.toLowerCase()] : f.UNKNOWN, r2.user = new ls(t3, n2.user), r2.lastDeletedAt = n2.device_token_last_deleted_at, r2;
  }
  t(t2, e2);
}(qe);
var qt = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = e2.call(this) || this;
    return r2.method = ae.DELETE, r2.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push/gcm"), r2;
  }
  return t(t2, e2), t2;
}(Fe);
!function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.type = n2.type ? f[n2.type.toLowerCase()] : f.UNKNOWN, r2.user = new ls(t3, n2.user), r2.lastDeletedAt = n2.device_token_last_deleted_at, r2;
  }
  t(t2, e2);
}(qe);
var xt = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.type, i = t3.token, s3 = t3.ts, o2 = e2.call(this) || this;
    return o2.method = ae.GET, o2.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push/").concat(encodeURIComponent(r2), "/device_tokens"), o2.params = { created_ts: s3, token: i }, o2;
  }
  return t(t2, e2), t2;
}(Fe);
var Ht = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.pushTokens = { type: n2.type ? f[n2.type.toLowerCase()] : f.UNKNOWN, deviceTokens: n2.device_tokens, hasMore: n2.has_more, token: n2.token }, r2;
  }
  return t(t2, e2), t2;
}(qe);
var Kt = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = e2.call(this) || this;
    return r2.method = ae.GET, r2.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/channel_invitation_preference"), r2;
  }
  return t(t2, e2), t2;
}(Fe);
var Gt = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.autoAccept = n2.auto_accept, r2;
  }
  return t(t2, e2), t2;
}(qe);
var Wt = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.willAutoAccept, i = e2.call(this) || this;
    return i.method = ae.PUT, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/channel_invitation_preference"), i.params = { auto_accept: r2 }, i;
  }
  return t(t2, e2), t2;
}(Fe);
var Vt = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.autoAccept = n2.auto_accept, r2;
  }
  return t(t2, e2), t2;
}(qe);
var Bt = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = e2.call(this) || this;
    return r2.method = ae.GET, r2.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push_preference"), r2;
  }
  return t(t2, e2), t2;
}(Fe);
var Jt = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.preference = { doNotDisturbOn: n2.do_not_disturb, startHour: n2.start_hour, startMin: n2.start_min, endHour: n2.end_hour, endMin: n2.end_min, timezone: n2.timezone }, r2;
  }
  return t(t2, e2), t2;
}(qe);
var Zt = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.doNotDisturbOn, i = t3.startHour, s3 = t3.startMin, o2 = t3.endHour, a3 = t3.endMin, u2 = t3.timezone, d2 = e2.call(this) || this;
    return d2.method = ae.PUT, d2.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push_preference"), d2.params = { do_not_disturb: r2, start_hour: i, start_min: s3, end_hour: o2, end_min: a3, timezone: u2 }, d2;
  }
  return t(t2, e2), t2;
}(Fe);
var $t2 = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.preference = { doNotDisturbOn: n2.do_not_disturb, startHour: n2.start_hour, startMin: n2.start_min, endHour: n2.end_hour, endMin: n2.end_min, timezone: n2.timezone }, r2;
  }
  return t(t2, e2), t2;
}(qe);
var Xt = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = e2.call(this) || this;
    return r2.method = ae.GET, r2.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push_preference"), r2;
  }
  return t(t2, e2), t2;
}(Fe);
var Yt = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.snoozePeriod = { isSnoozeOn: n2.snooze_enabled }, "number" == typeof n2.snooze_start_ts && (r2.snoozePeriod.startTs = n2.snooze_start_ts), "number" == typeof n2.snooze_end_ts && (r2.snoozePeriod.endTs = n2.snooze_end_ts), r2;
  }
  return t(t2, e2), t2;
}(qe);
var en2 = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.snoozeOn, i = t3.startTs, s3 = t3.endTs, o2 = e2.call(this) || this;
    return o2.method = ae.PUT, o2.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push_preference"), o2.params = { snooze_enabled: r2, snooze_start_ts: i, snooze_end_ts: s3 }, o2;
  }
  return t(t2, e2), t2;
}(Fe);
var tn2 = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.snoozePeriod = { isSnoozeOn: n2.snooze_enabled }, "number" == typeof n2.snooze_start_ts && (r2.snoozePeriod.startTs = n2.snooze_start_ts), "number" == typeof n2.snooze_end_ts && (r2.snoozePeriod.endTs = n2.snooze_end_ts), r2;
  }
  return t(t2, e2), t2;
}(qe);
var nn = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.blockedUserId, i = e2.call(this) || this;
    return i.method = ae.POST, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/block"), i.params = { target_id: r2 }, i;
  }
  return t(t2, e2), t2;
}(Fe);
!function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.user = new ls(t3, n2), r2;
  }
  t(t2, e2);
}(qe);
var rn = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.unblockedUserId, i = e2.call(this) || this;
    return i.method = ae.DELETE, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/block/").concat(encodeURIComponent(r2)), i;
  }
  return t(t2, e2), t2;
}(Fe);
!function(e2) {
  function t2() {
    return null !== e2 && e2.apply(this, arguments) || this;
  }
  t(t2, e2);
}(qe);
var sn = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = e2.call(this) || this;
    return r2.method = ae.GET, r2.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push_preference"), r2;
  }
  return t(t2, e2), t2;
}(Fe);
var on = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.pushTriggerOption = n2.push_trigger_option, r2;
  }
  return t(t2, e2), t2;
}(qe);
var an = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.pushTriggerOption, i = e2.call(this) || this;
    return i.method = ae.PUT, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push_preference"), i.params = { push_trigger_option: r2 }, i;
  }
  return t(t2, e2), t2;
}(Fe);
var un = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.pushTriggerOption = n2.push_trigger_option, r2;
  }
  return t(t2, e2), t2;
}(qe);
var cn = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = e2.call(this) || this;
    return r2.method = ae.GET, r2.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push/template"), r2;
  }
  return t(t2, e2), t2;
}(Fe);
var dn = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.name = n2.name, r2;
  }
  return t(t2, e2), t2;
}(qe);
var ln = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.templateName, i = e2.call(this) || this;
    return i.method = ae.PUT, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/push/template"), i.params = { name: r2 }, i;
  }
  return t(t2, e2), t2;
}(Fe);
var hn = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.name = n2.name, r2;
  }
  return t(t2, e2), t2;
}(qe);
var fn = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.token, i = e2.call(this) || this;
    return i.method = ae.GET, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/friends/changelogs"), i.params = { token: r2 }, i;
  }
  return t(t2, e2), t2;
}(Fe);
var pn = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.changelogs = { addedUsers: n2.added.map(function(e3) {
      return new ls(t3, e3);
    }), updatedUsers: n2.updated.map(function(e3) {
      return new ls(t3, e3);
    }), deletedUserIds: n2.deleted, hasMore: n2.has_more, token: n2.next }, r2;
  }
  return t(t2, e2), t2;
}(qe);
var vn = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.discoveries, i = e2.call(this) || this;
    return i.method = ae.PUT, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/friend_discoveries"), i.params = { friend_discoveries: r2.map(function(e3) {
      return { friend_discovery_key: e3.friendDiscoveryKey, friend_name: e3.friendName };
    }) }, i;
  }
  return t(t2, e2), t2;
}(Fe);
var gn = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.friendDiscoveryRequestId = n2.friend_discovery_request_id, r2;
  }
  return t(t2, e2), t2;
}(qe);
var mn = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.discoveryKeys, i = e2.call(this) || this;
    return i.method = ae.DELETE, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/friend_discoveries"), i.params = { friend_discovery_keys: r2 }, i;
  }
  return t(t2, e2), t2;
}(Fe);
!function(e2) {
  function t2() {
    return null !== e2 && e2.apply(this, arguments) || this;
  }
  t(t2, e2);
}(qe);
var bn = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.userIds, i = e2.call(this) || this;
    return i.method = ae.POST, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/friends"), i.params = { user_ids: r2 }, i;
  }
  return t(t2, e2), t2;
}(Fe);
var _n = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.users = n2.users.map(function(e3) {
      return new ls(t3, e3);
    }), r2;
  }
  return t(t2, e2), t2;
}(qe);
var yn2 = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.userIds, i = e2.call(this) || this;
    return i.method = ae.DELETE, i.path = "".concat(ue, "/").concat(encodeURIComponent(n2), "/friends"), i.params = { user_ids: r2 }, i;
  }
  return t(t2, e2), t2;
}(Fe);
!function(e2) {
  function t2() {
    return null !== e2 && e2.apply(this, arguments) || this;
  }
  t(t2, e2);
}(qe);
var wn = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = e2.call(this) || this;
    return r2.method = ae.GET, r2.path = "".concat(ue, "/").concat(n2, "/allow_friend_discovery"), r2.params = {}, r2;
  }
  return t(t2, e2), t2;
}(Fe);
var kn = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.allowFriendDiscovery = n2.allow_friend_discovery, r2;
  }
  return t(t2, e2), t2;
}(qe);
var Sn = function(e2) {
  function t2(t3) {
    var n2 = t3.userId, r2 = t3.allowFriendDiscovery, i = e2.call(this) || this;
    return i.method = ae.PUT, i.path = "".concat(ue, "/").concat(n2, "/allow_friend_discovery"), i.params = { allow_friend_discovery: r2 }, i;
  }
  return t(t2, e2), t2;
}(Fe);
!function(e2) {
  function t2() {
    return null !== e2 && e2.apply(this, arguments) || this;
  }
  t(t2, e2);
}(qe);
var In;
var Cn = function(e2) {
  function t2() {
    var t3 = e2.call(this) || this;
    return t3.method = ae.GET, t3.path = be, t3;
  }
  return t(t2, e2), t2;
}(Fe);
var En = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.emojiContainer = new Ct(n2), r2;
  }
  return t(t2, e2), t2;
}(qe);
var Tn = function(e2) {
  function t2(t3) {
    var n2 = t3.categoryId, r2 = e2.call(this) || this;
    return r2.method = ae.GET, r2.path = "".concat(be, "/").concat(n2), r2;
  }
  return t(t2, e2), t2;
}(Fe);
var Pn = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.emojiCategory = new It(n2), r2;
  }
  return t(t2, e2), t2;
}(qe);
var Dn = function(e2) {
  function t2(t3) {
    var n2 = t3.key, r2 = e2.call(this) || this;
    return r2.method = ae.GET, r2.path = "".concat(ve, "/").concat(n2), r2;
  }
  return t(t2, e2), t2;
}(Fe);
var Un2 = function(e2) {
  function t2(t3, n2) {
    var r2 = e2.call(this, t3, n2) || this;
    return r2.emoji = new St(n2), r2;
  }
  return t(t2, e2), t2;
}(qe);
var On2 = function(e2) {
  function t2() {
    var t3 = e2.call(this) || this;
    return t3.method = ae.GET, t3.path = "".concat(we), t3;
  }
  return t(t2, e2), t2;
}(Fe);
var An = function(e2) {
  function t2(t3, n2) {
    var r2, i = this, s3 = null != n2 ? n2 : {};
    return (i = e2.call(this, t3, n2) || this).uikitConfiguration = { string: JSON.stringify(s3), json: s3 }, i.updatedAt = null !== (r2 = null == n2 ? void 0 : n2.updated_at) && void 0 !== r2 ? r2 : 0, i;
  }
  return t(t2, e2), t2;
}(qe);
!function(e2) {
  e2.DELIVERED = "DELIVERED", e2.CLICKED = "CLICKED";
}(In || (In = {}));
var Nn;
var Mn = function(e2) {
  function t2(t3) {
    var n2 = t3.deviceToken, r2 = t3.pushTrackingId, i = t3.messageId, s3 = t3.allowedPushNotification, o2 = t3.channelKey, a3 = t3.templateKey, u2 = t3.eventType, d2 = t3.notificationEventDeadline, h = e2.call(this) || this;
    return h.method = ae.POST, h.path = Ie, h.params = se({ device_token: n2, push_tracking_id: r2, message_id: i, allowed_push_notification: s3, channel_key: o2, template_key: a3, event_type: u2, notification_event_deadline: d2 }), h;
  }
  return t(t2, e2), t2;
}(Fe);
var Ln = function() {
  function t2(e2, t3, n2) {
    var s3 = this;
    this._storeInitialized = false, this._iid = e2, this.options = t3;
    var o2 = uo.of(e2), a3 = o2.sdkState, u2 = o2.cacheContext, c2 = o2.dispatcher, d2 = o2.sessionManager, l2 = o2.requestQueue, h = o2.logger, f3 = o2.userEventHandlers, p2 = o2.appStateToggleEnabled;
    this._onlineDetector = new Ot({ logger: h, connectionDelegate: { reconnect: function() {
      return r(s3, void 0, void 0, function() {
        var t4, n3, r2, s4, o3, a4;
        return s(this, function(i) {
          switch (i.label) {
            case 0:
              if (t4 = uo.of(e2), n3 = t4.sdkState, r2 = t4.connectionManager, (s4 = t4.sessionManager).session.hasSession)
                return [3, 5];
              i.label = 1;
            case 1:
              return i.trys.push([1, 3, , 4]), [4, r2.connect(s4.session.authToken)];
            case 2:
              return i.sent(), [3, 4];
            case 3:
              if (o3 = i.sent(), v(o3))
                throw o3;
              return h.debug("connect failed by reconnect event = ", o3), [3, 4];
            case 4:
              return [3, 9];
            case 5:
              if ("foreground" !== n3.appState)
                return [3, 9];
              i.label = 6;
            case 6:
              return i.trys.push([6, 8, , 9]), [4, r2.resetAndReconnect()];
            case 7:
              return i.sent(), [3, 9];
            case 8:
              if (a4 = i.sent(), v(a4))
                throw a4;
              return h.debug("resetAndReconnect failed by reconnect event = ", a4), [3, 9];
            case 9:
              return c2.dispatch(new a2()), [2];
          }
        });
      });
    }, disconnect: function() {
      Dr(function() {
        return r(s3, void 0, void 0, function() {
          return s(this, function(t4) {
            switch (t4.label) {
              case 0:
                return [4, uo.of(e2).connectionManager.disconnect()];
              case 1:
                return t4.sent(), [2];
            }
          });
        });
      });
    } } });
    var v3 = new N(e2, { localCacheEnabled: u2.localCacheEnabled, enableAutoResend: u2.localCacheConfig.enableAutoResend, dispatcher: c2, sdkState: a3, logger: h });
    n2.forEach(function(t4) {
      t4.init(e2, { sdkState: a3, cacheContext: u2, dispatcher: c2, sessionManager: d2, requestQueue: l2, logger: h, onlineDetector: s3._onlineDetector }), s3[t4.name] = t4;
    }), this._appStateChangeDetector = new Ut({ isEnabled: p2 }), this._appStateChangeDetector.on("resume", function() {
      h.debug("the page resumes from freeze"), s3.setForegroundState();
    }).on("pause", function() {
      h.debug("the page freezes"), s3.setBackgroundState();
    }), c2.on(function(t4) {
      var n3;
      if (t4 instanceof Fr) {
        if (t4.stateType === Rr.CONNECTED)
          v3.processNonAutoResendRegisteredPendingMessages();
      } else if (t4 instanceof ze) {
        if ("USEV" === t4.code) {
          var o3 = t4.as(O).event;
          if (o3.category === L2.FRIEND_DISCOVERED) {
            var c3 = v2.getDataAsFriendDiscoveredEvent(e2, o3).friendDiscoveries;
            kr(function() {
              return r(s3, void 0, void 0, function() {
                return s(this, function(e3) {
                  return [2, f3.forEach(function(e4) {
                    e4.onFriendsDiscovered && e4.onFriendsDiscovered(c3);
                  })];
                });
              });
            });
          }
        }
      } else if (t4 instanceof xr) {
        var d3 = uo.of(s3._iid).subscribedUnreadMessageCount, l3 = false, p3 = t4.ts;
        "number" == typeof p3 && p3 > d3.ts && (d3.all !== t4.all && (l3 = true), d3.all = t4.all >= 0 ? t4.all : 0, t4.customTypes && Object.keys(t4.customTypes).forEach(function(e3) {
          d3.customTypes[e3] !== t4.customTypes[e3] && (l3 = true), d3.customTypes[e3] = t4.customTypes[e3];
        }), l3 = l3 && d3.ts > 0, d3.ts = p3), l3 && kr(function() {
          return r(s3, void 0, void 0, function() {
            return s(this, function(e3) {
              return [2, f3.forEach(function(e4) {
                e4.onTotalUnreadMessageCountChanged && e4.onTotalUnreadMessageCountChanged({ groupChannelCount: d3.all, feedChannelCount: d3.feed, customTypeUnreadCount: d3.customTypes }), e4.onTotalUnreadMessageCountUpdated && e4.onTotalUnreadMessageCountUpdated(d3.all, d3.customTypes);
              })];
            });
          });
        });
      } else
        t4 instanceof hs ? (u2.preference.set(s3._getUserProfileCacheKey(a3.userId), ds.payloadify(t4.userProfile)), (null === (n3 = t4.userProfile.appInfo.notificationInfo) || void 0 === n3 ? void 0 : n3.isEnabled) && u2.preference.set(Gr(s3.appId), { value: true })) : t4 instanceof fs ? t4.configSyncNeeded && Dr(function() {
          return r(s3, void 0, void 0, function() {
            return s(this, function(e3) {
              switch (e3.label) {
                case 0:
                  return [4, this._getAppConfigsInfo()];
                case 1:
                  return e3.sent(), [2];
              }
            });
          });
        }) : t4 instanceof m ? u2.preference.set(Xr(s3.appId), { configTs: t4.configTs }) : t4 instanceof Ve && t4.error && t4.error.isSessionInvalidatedError && (h.debug("session revoked."), s3._internalDisconnect(t4.error));
    });
  }
  return t2.init = function(e2) {
    var n2 = e2.appId, r2 = e2.appVersion, i = e2.modules, s3 = void 0 === i ? [] : i, o2 = e2.options, a3 = void 0 === o2 ? new L() : o2, u2 = e2.debugMode, c2 = void 0 !== u2 && u2, d2 = e2.customApiHost, l2 = e2.customWebSocketHost, h = e2.newInstance, f3 = void 0 !== h && h, p2 = e2.logLevel, v3 = e2.localCacheEnabled, g2 = void 0 !== v3 && v3, m2 = e2.localCacheConfig, b3 = void 0 === m2 ? new q() : m2, _2 = e2.localCacheEncryption, y = e2.useAsyncStorageStore, w2 = void 0 === y ? null : y, k2 = e2.useMMKVStorageStore, S3 = void 0 === k2 ? null : k2, I = e2.appStateToggleEnabled, C2 = void 0 === I || I;
    if (!Nn || f3) {
      var E3 = "su-".concat(ee()), P2 = null != _2 ? _2 : { encrypt: function(e3) {
        return e3;
      }, decrypt: function(e3) {
        return e3;
      } }, D = new Fs();
      D.level = null != p2 ? p2 : xs.WARN;
      var U = new Ns({ encryption: P2 });
      c2 || (et() ? S3 ? U = new Rs({ MMKV: S3, encryption: P2 }) : w2 && (U = new Ps({ AsyncStorage: w2, encryption: P2 }), D.warn("AsyncStorage store is deprecated due to the small size limit. Please use MMKVStorage store instead.")) : U = new ks({ encryption: P2 })), new uo(E3, { appId: n2, appVersion: r2, options: a3, apiHost: null != d2 ? d2 : "https://api-".concat(n2, ".sendbird.com"), websocketHost: null != l2 ? l2 : "wss://ws-".concat(n2, ".sendbird.com"), store: U, encryption: P2, logger: D, localCacheEnabled: g2, localCacheConfig: b3, debugMode: c2, appStateToggleEnabled: C2 });
      var O2 = [new Ia(), new f2()], L3 = new t2(E3, a3, c(c([], a(s3), false), a(O2), false));
      return Nn || (Nn = L3), L3;
    }
    return Nn;
  }, Object.defineProperty(t2, "instance", { get: function() {
    return Nn;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2, "version", { get: function() {
    return l;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "appId", { get: function() {
    return uo.of(this._iid).sdkState.appId;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "appInfo", { get: function() {
    var e2 = uo.of(this._iid).appInfo;
    return null != e2 ? e2 : null;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "appVersion", { get: function() {
    var e2;
    return null !== (e2 = uo.of(this._iid).sdkState.appVersion) && void 0 !== e2 ? e2 : "";
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "debugMode", { get: function() {
    return !!uo.of(this._iid).debugMode;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "logLevel", { get: function() {
    return uo.of(this._iid).logger.level;
  }, set: function(e2) {
    uo.of(this._iid).logger.level = e2;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "isCacheEnabled", { get: function() {
    return uo.of(this._iid).cacheContext.localCacheEnabled;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "localCacheConfig", { get: function() {
    var e2 = uo.of(this._iid).cacheContext;
    return e2.localCacheEnabled ? e2.localCacheConfig : null;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "ekey", { get: function() {
    return uo.of(this._iid).sessionManager.ekey;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "currentUser", { get: function() {
    var e2;
    return null !== (e2 = uo.of(this._iid).sessionManager.currentUser) && void 0 !== e2 ? e2 : null;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "connectionState", { get: function() {
    var e2 = uo.of(this._iid).connectionManager;
    return e2.isConnected ? Ar.OPEN : e2.isConnecting ? Ar.CONNECTING : Ar.CLOSED;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "lastConnectedAt", { get: function() {
    var e2 = uo.of(this._iid), t3 = e2.connectedAt;
    return e2.connectionManager.isConnected ? t3 : 0;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "fcmPushToken", { get: function() {
    var e2;
    return null !== (e2 = this._fcmPushToken) && void 0 !== e2 ? e2 : null;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "apnsPushToken", { get: function() {
    var e2;
    return null !== (e2 = this._apnsPushToken) && void 0 !== e2 ? e2 : null;
  }, enumerable: false, configurable: true }), t2.prototype._getNestDBVersion = function() {
    return 8;
  }, t2.prototype._getPreferenceVersion = function() {
    return 9;
  }, t2.prototype._getPreferenceCacheKey = function(e2) {
    return "sendbird@".concat(this.appId, "/").concat(e2, ".pref");
  }, t2.prototype._getUserProfileCacheKey = function(e2) {
    return "sendbird@".concat(this.appId, "/").concat(e2, ".profile");
  }, t2.prototype._internalDisconnect = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2, s3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return t3 = uo.of(this._iid), n2 = t3.connectionManager, r2 = t3.sdkState, s3 = t3.requestQueue, this._appStateChangeDetector.stop(), this._onlineDetector.stop(), s3.cancelAll(), [4, n2.logout(e2)];
          case 1:
            return i.sent(), [4, this.clearCachedData()];
          case 2:
            return i.sent(), r2.appState = "foreground", [2];
        }
      });
    });
  }, t2.prototype._getAppConfigsInfo = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2, s3, o2, a3, u2, c2, d2 = this;
      return s(this, function(l2) {
        switch (l2.label) {
          case 0:
            return e2 = uo.of(this._iid), t3 = e2.requestQueue, n2 = e2.dispatcher, s3 = e2.cacheContext, o2 = e2.sdkState, a3 = {}, [4, s3.preference.get(Xr(o2.appId))];
          case 1:
            return (c2 = l2.sent()) && (u2 = c2.configTs), new w("appConfigsInfo", function(e3) {
              return r(d2, void 0, void 0, function() {
                var r2, s4, o3, u3, c3, d3, l3, h;
                return s(this, function(i) {
                  switch (i.label) {
                    case 0:
                      return r2 = { hasNext: true, nextToken: e3 }, s4 = new At({ token: e3 }), [4, t3.send(s4)];
                    case 1:
                      return o3 = i.sent(), u3 = o3.as(Nt), c3 = u3.configs, d3 = u3.hasMore, l3 = u3.nextToken, h = u3.ts, Object.keys(c3).forEach(function(e4) {
                        a3[e4] = c3[e4];
                      }), r2.hasNext = d3, r2.nextToken = l3, d3 || n2.dispatch(new P({ appConfigsInfo: a3, configTs: h })), [2, r2];
                  }
                });
              });
            }).start(u2), [2];
        }
      });
    });
  }, t2.prototype.getMemoryStoreForDebugging = function() {
    var e2 = uo.of(this._iid), t3 = e2.debugMode, n2 = e2.cacheContext;
    if (t3)
      return n2.store instanceof Ns ? n2.store : null;
    throw b.debugModeRequired;
  }, t2.prototype.addExtension = function(e2, t3) {
    var n2 = uo.of(this._iid).sdkState;
    ["sb_uikit", "sb_syncmanager", "device-os-platform"].indexOf(e2) > -1 && n2.extensions && (n2.extensions[e2] = t3);
  }, t2.prototype.addSendbirdExtensions = function(e2, t3, n2) {
    var r2, i, s3 = uo.of(this._iid), o2 = s3.logger, a3 = s3.sdkState, u2 = new RegExp(nt);
    if (0 === e2.length)
      return o2.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."), false;
    if (e2.find(function(e3) {
      return !u2.test(e3.version);
    }))
      return o2.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."), false;
    if (n2)
      try {
        for (var c2 = o(Object.entries(n2)), d2 = c2.next(); !d2.done; d2 = c2.next()) {
          var l2 = a(d2.value, 2), h = l2[0], f3 = l2[1];
          if (/&|=/.test(h) || /&|=/.test(f3))
            return o2.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."), false;
        }
      } catch (e3) {
        r2 = { error: e3 };
      } finally {
        try {
          d2 && !d2.done && (i = c2.return) && i.call(c2);
        } finally {
          if (r2)
            throw r2.error;
        }
      }
    return a3.sendbirdRuntimeEnvironment = { sendbirdExtensions: e2, deviceOS: t3, customData: n2 }, true;
  }, t2.prototype.setOnlineListener = function(e2) {
    this._onlineDetector.setOnlineListener(e2);
  }, t2.prototype.setOfflineListener = function(e2) {
    this._onlineDetector.setOfflineListener(e2);
  }, t2.prototype._safeInitializeStore = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3;
      return s(this, function(n2) {
        switch (n2.label) {
          case 0:
            t3 = uo.of(this._iid).cacheContext, n2.label = 1;
          case 1:
            return n2.trys.push([1, 3, , 5]), [4, t3.store.init(e2)];
          case 2:
            return n2.sent(), this._storeInitialized = true, [3, 5];
          case 3:
            return n2.sent(), t3.replaceStore(new Ns()), [4, this._safeInitializeStore(e2)];
          case 4:
            return n2.sent(), [3, 5];
          case 5:
            return [2];
        }
      });
    });
  }, t2.prototype.setLocaleForChatbot = function(e2) {
    var t3 = uo.of(this._iid).sdkState, n2 = function(e3) {
      return e3.replace(/[^a-zA-Z-_.]/g, "");
    }(e2.trim());
    n2 && (t3.localeForChatbot = n2);
  }, t2.prototype.initializeCache = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2, s3, o2, a3, u2, c2, d2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            if (t3 = uo.of(this._iid), n2 = t3.sdkState, r2 = t3.cacheContext, s3 = t3.dispatcher, o2 = t3.logger, n2.userId && n2.userId === e2)
              return [3, 13];
            a3 = "sendbird@".concat(n2.appId, "/").concat(e2, ".db"), i.label = 1;
          case 1:
            return i.trys.push([1, 9, 11, 13]), r2.localCacheEnabled ? r2.nestdb && r2.nestdb.state !== Os.CLOSED && r2.nestdb.name === a3 ? [3, 3] : (u2 = "sendbird@".concat(n2.appId, "/").concat(e2, ".db"), (c2 = r2.nestdb = new Ds({ name: u2, version: this._getNestDBVersion(), store: r2.store, config: new Li({ dbname: u2, itemSizeLimit: 61440 }) })).on("upgrade", Pt(c2)), c2.on("storeReplaced", function(e3) {
              r2.replaceStore(e3), r2.localCacheEnabled = false, c2.on("upgrade", Pt(c2));
            }), [4, c2.open()]) : [3, 6];
          case 2:
            return i.sent(), this._storeInitialized = true, s3.dispatch(new T2(this._iid, { userId: e2 })), [3, 5];
          case 3:
            return [4, this._safeInitializeStore(a3)];
          case 4:
            i.sent(), i.label = 5;
          case 5:
            return n2.userId = e2, [3, 8];
          case 6:
            return [4, this._safeInitializeStore(a3)];
          case 7:
            i.sent(), n2.userId = e2, i.label = 8;
          case 8:
            return [3, 13];
          case 9:
            return d2 = i.sent(), o2.warn("Nest DB Open Failed. ", d2), r2.store instanceof Ns || (r2.replaceStore(new Ns()), r2.localCacheEnabled = false), [4, this._safeInitializeStore(a3)];
          case 10:
            throw i.sent(), n2.userId = e2, b.databaseError;
          case 11:
            return [4, this._setupPreference(e2)];
          case 12:
            return i.sent(), [7];
          case 13:
            return [2];
        }
      });
    });
  }, t2.prototype.getCacheDataSize = function() {
    return r(this, void 0, void 0, function() {
      var e2;
      return s(this, function(t3) {
        switch (t3.label) {
          case 0:
            return (e2 = uo.of(this._iid).cacheContext).localCacheEnabled && e2.nestdb ? [4, e2.nestdb.estimateUsage()] : [3, 2];
          case 1:
            return [2, t3.sent()];
          case 2:
            return [2, 0];
        }
      });
    });
  }, t2.prototype.clearCachedData = function() {
    return r(this, void 0, void 0, function() {
      var e2;
      return s(this, function(t3) {
        switch (t3.label) {
          case 0:
            return (e2 = uo.of(this._iid).cacheContext).localCacheEnabled && e2.nestdb ? [4, e2.nestdb.clear()] : [3, 2];
          case 1:
            t3.sent(), t3.label = 2;
          case 2:
            return this._storeInitialized ? [4, e2.preference.clear()] : [3, 4];
          case 3:
            t3.sent(), t3.label = 4;
          case 4:
            return [2];
        }
      });
    });
  }, t2.prototype.clearCachedMessages = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, s3 = this;
      return s(this, function(o2) {
        switch (o2.label) {
          case 0:
            return cs(C("string", e2)).throw(b.invalidParameters), t3 = Zs.of(this._iid), n2 = Js.of(this._iid), t3 && n2 ? [4, Promise.all(e2.map(function(e3) {
              return r(s3, void 0, void 0, function() {
                return s(this, function(r2) {
                  switch (r2.label) {
                    case 0:
                      return [4, t3.removeMessagesOfChannel(e3)];
                    case 1:
                      return r2.sent(), [4, n2.removeMessagesOfChannel(e3)];
                    case 2:
                      return r2.sent(), [2];
                  }
                });
              });
            }))] : [3, 2];
          case 1:
            o2.sent(), o2.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, t2.prototype._setupPreference = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2, s3, o2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return t3 = uo.of(this._iid), n2 = t3.sdkState, r2 = t3.cacheContext, s3 = t3.statManager, [4, r2.preference.init(this._getPreferenceCacheKey(e2), this._getPreferenceVersion())];
          case 1:
            return i.sent(), [4, r2.preference.get(this._getUserProfileCacheKey(e2))];
          case 2:
            return (o2 = i.sent()) && new ds(this._iid, o2).apply(), [4, s3.init("sendbird@".concat(n2.appId, "/").concat(e2, ".statlog"))];
          case 3:
            return i.sent(), [2];
        }
      });
    });
  }, t2.prototype._ready = function(e2, t3, s3) {
    return void 0 === s3 && (s3 = {}), r(this, void 0, void 0, function() {
      var r2, o2, a3, u2, c2, d2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(S("string", e2) && S("string", t3, true)).throw(b.invalidParameters), r2 = uo.of(this._iid), o2 = r2.sdkState, a3 = r2.cacheContext, u2 = r2.connectionManager, c2 = s3.errorForOtherUser, o2.userId && o2.userId !== e2 ? c2 ? [3, 2] : [4, u2.logout()] : [3, 3];
          case 1:
            return i.sent(), [3, 3];
          case 2:
            throw c2;
          case 3:
            return i.trys.push([3, 5, , 6]), [4, this.initializeCache(e2)];
          case 4:
            return i.sent(), uo.of(this._iid).dispatcher.dispatch(new S2()), [3, 6];
          case 5:
            return i.sent(), d2 = uo.of(this._iid).logger, a3.localCacheEnabled = false, d2.warn("Cache initialization failed - cache is not available."), [3, 6];
          case 6:
            return [2];
        }
      });
    });
  }, t2.prototype.authenticateFeed = function(e2, t3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n2) {
        switch (n2.label) {
          case 0:
            return [4, this.authenticate(e2, t3)];
          case 1:
            return [2, n2.sent()];
        }
      });
    });
  }, t2.prototype.authenticate = function(e2, t3, n2) {
    var s3;
    return void 0 === n2 && (n2 = p.SESSION_TOKEN), r(this, void 0, void 0, function() {
      var r2, o2, a3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return r2 = uo.of(this._iid), o2 = r2.sessionManager, a3 = r2.connectionManager, [4, this._ready(e2, t3, { errorForOtherUser: a3.isConnected ? b.alreadyConnectedAsAnotherUser : void 0 })];
          case 1:
            return i.sent(), (null === (s3 = o2.session.services) || void 0 === s3 ? void 0 : s3.includes(M.CHAT)) ? [3, 3] : (o2.handler || t3 && n2 !== p.ACCESS_TOKEN || this.setSessionHandler(new Mi()), [4, o2.authenticate(e2, t3)]);
          case 2:
            i.sent(), i.label = 3;
          case 3:
            return [2, this.currentUser];
        }
      });
    });
  }, t2.prototype.connect = function(e2, t3) {
    return r(this, void 0, void 0, function() {
      return s(this, function(n2) {
        switch (n2.label) {
          case 0:
            return [4, this._ready(e2, t3)];
          case 1:
            n2.sent(), n2.label = 2;
          case 2:
            return n2.trys.push([2, , 4, 5]), [4, uo.of(this._iid).connectionManager.connect(t3)];
          case 3:
            return n2.sent(), [3, 5];
          case 4:
            return this._onlineDetector.start(), this._appStateChangeDetector.start(), [7];
          case 5:
            return [2, this.currentUser];
        }
      });
    });
  }, t2.prototype.reconnect = function() {
    var e2 = uo.of(this._iid), t3 = e2.connectionManager, n2 = e2.sdkState, r2 = e2.sessionManager.session.hasSession;
    return r2 && (this._appStateChangeDetector.start(), this._onlineDetector.start(), t3.resetAndReconnect().then(function() {
      n2.appState = "foreground";
    }).catch(function() {
    })), r2;
  }, t2.prototype.disconnect = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e2) {
        switch (e2.label) {
          case 0:
            return [4, this._internalDisconnect()];
          case 1:
            return e2.sent(), [2];
        }
      });
    });
  }, t2.prototype.disconnectWebSocket = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2;
      return s(this, function(r2) {
        switch (r2.label) {
          case 0:
            return e2 = uo.of(this._iid), t3 = e2.connectionManager, n2 = e2.requestQueue, this._appStateChangeDetector.stop(), this._onlineDetector.stop(), n2.cancelAll(), [4, t3.disconnectWebSocket(true)];
          case 1:
            return r2.sent(), [2];
        }
      });
    });
  }, t2.prototype.setBackgroundState = function() {
    var e2 = uo.of(this._iid), t3 = e2.connectionManager, n2 = e2.sdkState, r2 = e2.logger;
    "foreground" === n2.appState && (n2.appState = "background", r2.debug("going background state"), t3.background().catch(function(e3) {
      r2.debug("setBackgroundState error = ", e3);
    }));
  }, t2.prototype.setForegroundState = function() {
    var e2 = uo.of(this._iid), t3 = e2.connectionManager, n2 = e2.sdkState, r2 = e2.dispatcher, i = e2.logger;
    "background" === n2.appState && (n2.appState = "foreground", i.debug("going foreground state"), t3.resetAndReconnect().catch(function(e3) {
      i.debug("setForgroundState error = ", e3);
    }), r2.dispatch(new a2()));
  }, t2.prototype.setSessionHandler = function(e2) {
    cs(e2 instanceof Mi).throw(b.invalidParameters), uo.of(this._iid).sessionManager.handler = e2;
  }, t2.prototype.addUserEventHandler = function(e2, t3) {
    cs(S("string", e2) && t3 instanceof Si).throw(b.invalidParameters), uo.of(this._iid).userEventHandlers.set(e2, t3);
  }, t2.prototype.removeUserEventHandler = function(e2) {
    uo.of(this._iid).userEventHandlers.delete(e2);
  }, t2.prototype.removeAllUserEventHandler = function() {
    uo.of(this._iid).userEventHandlers.clear();
  }, t2.prototype.addConnectionHandler = function(e2, t3) {
    cs(S("string", e2) && t3 instanceof wi).throw(b.invalidParameters), uo.of(this._iid).connectionHandlers.set(e2, t3);
  }, t2.prototype.removeConnectionHandler = function(e2) {
    uo.of(this._iid).connectionHandlers.delete(e2);
  }, t2.prototype.removeAllConnectionHandler = function() {
    uo.of(this._iid).connectionHandlers.clear();
  }, t2.prototype.createApplicationUserListQuery = function(e2) {
    return void 0 === e2 && (e2 = {}), new Ni(this._iid, e2);
  }, t2.prototype.createBlockedUserListQuery = function(e2) {
    return void 0 === e2 && (e2 = {}), new ki(this._iid, e2);
  }, t2.prototype.createFriendListQuery = function(e2) {
    return void 0 === e2 && (e2 = {}), new xi(this._iid, e2);
  }, t2.prototype.createMessageSearchQuery = function(e2) {
    return new ma(this._iid, e2);
  }, t2.prototype.createPollListQuery = function(e2) {
    return new Yo(this._iid, n({}, e2));
  }, t2.prototype.createPollVoterListQuery = function(e2) {
    return new $o(this._iid, n({}, e2));
  }, t2.prototype.buildUserFromSerializedData = function(e2) {
    var t3 = as(e2);
    return new ls(this._iid, ls.payloadify(t3));
  }, t2.prototype.updateCurrentUserInfo = function(t3) {
    return void 0 === t3 && (t3 = {}), r(this, void 0, void 0, function() {
      var r2, s3, o2, a3, u2, c2, d2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return r2 = n(n({}, Et2), t3), cs(function(t4) {
              return k(t4.profileImage, true) && S("string", t4.profileUrl, true) && S("string", t4.nickname, true);
            }(r2)).throw(b.invalidParameters), this.currentUser ? (s3 = uo.of(this._iid), o2 = s3.sdkState, a3 = s3.requestQueue, u2 = new Mt(n({ userId: o2.userId }, r2)), [4, a3.send(u2)]) : [3, 2];
          case 1:
            return c2 = i.sent(), d2 = c2.as(Lt).user, this.currentUser && (r2.nickname && (this.currentUser.nickname = d2.nickname), (r2.profileUrl || r2.profileImage) && (this.currentUser.plainProfileUrl = d2.profileUrl)), [2, d2];
          case 2:
            throw b.connectionRequired;
        }
      });
    });
  }, t2.prototype.updateCurrentUserInfoWithPreferredLanguages = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2, s3, o2, a3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(C("string", e2)).throw(b.invalidParameters), this.currentUser ? (t3 = uo.of(this._iid), n2 = t3.sdkState, r2 = t3.requestQueue, s3 = new Mt({ userId: n2.userId, preferredLanguages: e2 }), [4, r2.send(s3)]) : [3, 2];
          case 1:
            return o2 = i.sent(), a3 = o2.as(Lt).user, this.currentUser && (this.currentUser.preferredLanguages = a3.preferredLanguages), [2, a3];
          case 2:
            throw b.connectionRequired;
        }
      });
    });
  }, t2.prototype.registerFCMPushTokenForCurrentUser = function(e2, t3) {
    var s3, o2;
    return r(this, void 0, void 0, function() {
      var a3, u2, c2, d2, l2, h, f3 = this;
      return s(this, function(p2) {
        switch (p2.label) {
          case 0:
            if (cs(S("string", e2) && S("string", null == t3 ? void 0 : t3.deviceManufacturer, true)).throw(b.invalidParameters), (null == t3 ? void 0 : t3.deviceOS) && cs(T(Je, t3.deviceOS.platform, true) && S("string", t3.deviceOS.version, true)).throw(b.invalidParameters), !this.currentUser)
              return [3, 6];
            a3 = { deviceOS: "".concat((null === (s3 = null == t3 ? void 0 : t3.deviceOS) || void 0 === s3 ? void 0 : s3.platform) || Je.ANDROID, "-").concat((null === (o2 = null == t3 ? void 0 : t3.deviceOS) || void 0 === o2 ? void 0 : o2.version) || "unknown"), deviceManufacturer: null == t3 ? void 0 : t3.deviceManufacturer, systemPushEnabled: null == t3 ? void 0 : t3.systemPushEnabled }, p2.label = 1;
          case 1:
            return p2.trys.push([1, 4, , 5]), u2 = uo.of(this._iid), c2 = u2.sessionManager, d2 = u2.sdkState, l2 = u2.requestQueue, c2.hasDeviceToken(f.FCM, e2) ? [2, d.SUCCESS] : (h = new zt({ userId: d2.userId, token: e2, deviceOS: a3.deviceOS, deviceManufacturer: a3.deviceManufacturer, systemPushEnabled: a3.systemPushEnabled }), [4, l2.send(h)]);
          case 2:
            return p2.sent(), [4, Dr(function() {
              return r(f3, void 0, void 0, function() {
                return s(this, function(t4) {
                  switch (t4.label) {
                    case 0:
                      return c2.setDeviceToken(f.FCM, e2, a3), [4, c2.saveDeviceToken()];
                    case 1:
                      return t4.sent(), [2];
                  }
                });
              });
            })];
          case 3:
            return p2.sent(), this._fcmPushToken = "", [2, d.SUCCESS];
          case 4:
            return p2.sent(), [2, d.ERROR];
          case 5:
            return [3, 7];
          case 6:
            return this._fcmPushToken = e2, [2, d.PENDING];
          case 7:
            return [2];
        }
      });
    });
  }, t2.prototype.unregisterFCMPushTokenForCurrentUser = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, s3, o2, a3, u2, c2, d2 = this;
      return s(this, function(l2) {
        switch (l2.label) {
          case 0:
            if (cs(S("string", e2)).throw(b.invalidParameters), !this.currentUser)
              return [3, 6];
            l2.label = 1;
          case 1:
            return l2.trys.push([1, 4, , 5]), t3 = uo.of(this._iid), s3 = t3.sessionManager, o2 = t3.sdkState, a3 = t3.requestQueue, u2 = new Ft({ userId: o2.userId, token: e2 }), [4, a3.send(u2)];
          case 2:
            return c2 = l2.sent().lastDeletedAt, [4, Dr(function() {
              return r(d2, void 0, void 0, function() {
                return s(this, function(t4) {
                  switch (t4.label) {
                    case 0:
                      return s3.unsetDeviceToken(f.FCM, e2), s3.setDeviceTokenDeletedAt(c2), [4, s3.saveDeviceToken()];
                    case 1:
                      return t4.sent(), [2];
                  }
                });
              });
            })];
          case 3:
            return l2.sent(), this._fcmPushToken = "", [2, d.SUCCESS];
          case 4:
            return l2.sent(), [2, d.ERROR];
          case 5:
            return [3, 7];
          case 6:
            return this._fcmPushToken = e2, [2, d.PENDING];
          case 7:
            return [2];
        }
      });
    });
  }, t2.prototype.unregisterFCMPushTokenAllForCurrentUser = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2, s3, o2, a3, u2 = this;
      return s(this, function(c2) {
        switch (c2.label) {
          case 0:
            return this.currentUser ? (e2 = uo.of(this._iid), t3 = e2.sessionManager, n2 = e2.sdkState, s3 = e2.requestQueue, o2 = new qt({ userId: n2.userId }), [4, s3.send(o2)]) : [3, 3];
          case 1:
            return a3 = c2.sent().lastDeletedAt, [4, Dr(function() {
              return r(u2, void 0, void 0, function() {
                return s(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return t3.unsetDeviceTokens(f.FCM), t3.setDeviceTokenDeletedAt(a3), [4, t3.saveDeviceToken()];
                    case 1:
                      return e3.sent(), [2];
                  }
                });
              });
            })];
          case 2:
            c2.sent(), c2.label = 3;
          case 3:
            return [2];
        }
      });
    });
  }, t2.prototype.registerAPNSPushTokenForCurrentUser = function(e2, t3) {
    var s3, o2;
    return r(this, void 0, void 0, function() {
      var a3, u2, c2, d2, l2, h, f3 = this;
      return s(this, function(p2) {
        switch (p2.label) {
          case 0:
            if (cs(S("string", e2) && S("string", null == t3 ? void 0 : t3.deviceManufacturer, true)).throw(b.invalidParameters), (null == t3 ? void 0 : t3.deviceOS) && cs(T(Je, t3.deviceOS.platform, true) && S("string", t3.deviceOS.version, true)).throw(b.invalidParameters), !this.currentUser)
              return [3, 6];
            a3 = { deviceOS: "".concat((null === (s3 = null == t3 ? void 0 : t3.deviceOS) || void 0 === s3 ? void 0 : s3.platform) || Je.IOS, "-").concat((null === (o2 = null == t3 ? void 0 : t3.deviceOS) || void 0 === o2 ? void 0 : o2.version) || "unknown"), deviceManufacturer: null == t3 ? void 0 : t3.deviceManufacturer, systemPushEnabled: null == t3 ? void 0 : t3.systemPushEnabled }, p2.label = 1;
          case 1:
            return p2.trys.push([1, 4, , 5]), u2 = uo.of(this._iid), c2 = u2.sessionManager, d2 = u2.sdkState, l2 = u2.requestQueue, c2.hasDeviceToken(f.APNS, e2) ? [2, d.SUCCESS] : (h = new Rt({ userId: d2.userId, token: e2, deviceOS: a3.deviceOS, deviceManufacturer: a3.deviceManufacturer, systemPushEnabled: a3.systemPushEnabled }), [4, l2.send(h)]);
          case 2:
            return p2.sent(), [4, Dr(function() {
              return r(f3, void 0, void 0, function() {
                return s(this, function(t4) {
                  switch (t4.label) {
                    case 0:
                      return c2.setDeviceToken(f.APNS, e2, a3), [4, c2.saveDeviceToken()];
                    case 1:
                      return t4.sent(), [2];
                  }
                });
              });
            })];
          case 3:
            return p2.sent(), this._apnsPushToken = "", [2, d.SUCCESS];
          case 4:
            return p2.sent(), [2, d.ERROR];
          case 5:
            return [3, 7];
          case 6:
            return this._apnsPushToken = e2, [2, d.PENDING];
          case 7:
            return [2];
        }
      });
    });
  }, t2.prototype.unregisterAPNSPushTokenForCurrentUser = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, s3, o2, a3, u2, c2, d2 = this;
      return s(this, function(l2) {
        switch (l2.label) {
          case 0:
            if (cs(S("string", e2)).throw(b.invalidParameters), !this.currentUser)
              return [3, 6];
            l2.label = 1;
          case 1:
            return l2.trys.push([1, 4, , 5]), t3 = uo.of(this._iid), s3 = t3.sessionManager, o2 = t3.sdkState, a3 = t3.requestQueue, u2 = new Qt2({ userId: o2.userId, token: e2 }), [4, a3.send(u2)];
          case 2:
            return c2 = l2.sent().lastDeletedAt, [4, Dr(function() {
              return r(d2, void 0, void 0, function() {
                return s(this, function(t4) {
                  switch (t4.label) {
                    case 0:
                      return s3.unsetDeviceToken(f.APNS, e2), s3.setDeviceTokenDeletedAt(c2), [4, s3.saveDeviceToken()];
                    case 1:
                      return t4.sent(), [2];
                  }
                });
              });
            })];
          case 3:
            return l2.sent(), this._apnsPushToken = "", [2, d.SUCCESS];
          case 4:
            return l2.sent(), [2, d.ERROR];
          case 5:
            return [3, 7];
          case 6:
            return this._apnsPushToken = e2, [2, d.PENDING];
          case 7:
            return [2];
        }
      });
    });
  }, t2.prototype.unregisterAPNSPushTokenAllForCurrentUser = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2, s3, o2, a3, u2 = this;
      return s(this, function(c2) {
        switch (c2.label) {
          case 0:
            return this.currentUser ? (e2 = uo.of(this._iid), t3 = e2.sessionManager, n2 = e2.sdkState, s3 = e2.requestQueue, o2 = new jt({ userId: n2.userId }), [4, s3.send(o2)]) : [3, 3];
          case 1:
            return a3 = c2.sent().lastDeletedAt, [4, Dr(function() {
              return r(u2, void 0, void 0, function() {
                return s(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return t3.unsetDeviceTokens(f.APNS), t3.setDeviceTokenDeletedAt(a3), [4, t3.saveDeviceToken()];
                    case 1:
                      return e3.sent(), [2];
                  }
                });
              });
            })];
          case 2:
            c2.sent(), c2.label = 3;
          case 3:
            return [2];
        }
      });
    });
  }, t2.prototype.markPushNotificationAsDelivered = function(e2, t3) {
    var n2;
    return void 0 === t3 && (t3 = true), r(this, void 0, void 0, function() {
      var r2, s3, o2, a3, u2, c2, d2, l2, h, f3, p2, v3, g2, m2, b3, _2, y, w2, k2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            if (r2 = uo.of(this._iid), s3 = r2.logger, o2 = r2.sessionManager, a3 = r2.requestQueue, u2 = r2.pushNotificationAckManager, s3.debug("markPushNotificationAsDelivered:", e2), c2 = In.DELIVERED, d2 = u2.parseData(e2), l2 = d2.pushTrackingId, h = d2.sessionTopics, f3 = d2.sessionKey, p2 = d2.messageId, v3 = d2.channelKey, g2 = d2.templateKey, m2 = d2.notificationEventDeadline, !f3)
              throw s3.info("Can't use markPushNotificationAsDelivered() feature."), b.malformedDataError;
            if (!h.includes(Ks.PUSH_ACKNOWLEDGEMENT))
              throw s3.info("Can't use markPushNotificationAsDelivered() feature."), b.malformedDataError;
            if (u2.isAcked(l2, c2))
              return s3.info("already delivered push notification:", l2), [2];
            b3 = Boolean(v3), _2 = t3 && b3, y = null === (n2 = o2.deviceTokens[0]) || void 0 === n2 ? void 0 : n2.token, w2 = new Mn({ deviceToken: null != y ? y : "", pushTrackingId: l2, eventType: c2, messageId: p2, channelKey: v3, templateKey: g2, notificationEventDeadline: m2, allowedPushNotification: _2 }), f3 && (w2.headers["Session-Key"] = f3), i.label = 1;
          case 1:
            return i.trys.push([1, 3, , 4]), [4, a3.send(w2)];
          case 2:
            return i.sent(), u2.markAsAcked(l2, c2), [3, 4];
          case 3:
            throw k2 = i.sent(), s3.debug("failed to mark push notification as delivered. push tracking id: ".concat(l2, ". error: ").concat(k2)), k2;
          case 4:
            return [2];
        }
      });
    });
  }, t2.prototype.markPushNotificationAsClicked = function(e2) {
    var t3;
    return r(this, void 0, void 0, function() {
      var n2, r2, s3, o2, a3, u2, c2, d2, l2, h, f3, p2, v3, g2, m2, b3, _2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            if (n2 = uo.of(this._iid), r2 = n2.logger, s3 = n2.sessionManager, o2 = n2.requestQueue, a3 = n2.pushNotificationAckManager, r2.debug("markPushNotificationAsClicked:", e2), u2 = In.CLICKED, c2 = a3.parseData(e2), d2 = c2.pushTrackingId, l2 = c2.sessionTopics, h = c2.sessionKey, f3 = c2.messageId, p2 = c2.channelKey, v3 = c2.templateKey, g2 = c2.notificationEventDeadline, !h)
              throw r2.info("Can't use markPushNotificationAsClicked() feature."), b.malformedDataError;
            if (!l2.includes(Ks.PUSH_ACKNOWLEDGEMENT))
              throw r2.info("Can't use markPushNotificationAsClicked() feature."), b.malformedDataError;
            if (a3.isAcked(d2, u2))
              return r2.info("already clicked push notification:", d2), [2];
            m2 = null === (t3 = s3.deviceTokens[0]) || void 0 === t3 ? void 0 : t3.token, b3 = new Mn({ deviceToken: null != m2 ? m2 : "", pushTrackingId: d2, eventType: u2, messageId: f3, channelKey: p2, templateKey: v3, notificationEventDeadline: g2 }), h && (b3.headers["Session-Key"] = h), i.label = 1;
          case 1:
            return i.trys.push([1, 3, , 4]), [4, o2.send(b3)];
          case 2:
            return i.sent(), a3.markAsAcked(d2, u2), [3, 4];
          case 3:
            throw _2 = i.sent(), r2.debug("failed to mark push notification as clicked. push tracking id: ".concat(d2, ". error: ").concat(_2)), _2;
          case 4:
            return [2];
        }
      });
    });
  }, t2.prototype.getChannelInvitationPreference = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2, r2, s3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return e2 = uo.of(this._iid), t3 = e2.sdkState, n2 = e2.requestQueue, r2 = new Kt({ userId: t3.userId }), [4, n2.send(r2)];
          case 1:
            return s3 = i.sent(), [2, { autoAccept: s3.as(Gt).autoAccept }];
        }
      });
    });
  }, t2.prototype.setChannelInvitationPreference = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, r2, s3, o2, a3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(S("boolean", e2)).throw(b.invalidParameters), t3 = uo.of(this._iid), r2 = t3.sdkState, s3 = t3.requestQueue, o2 = new Wt({ userId: r2.userId, willAutoAccept: e2 }), [4, s3.send(o2)];
          case 1:
            return a3 = i.sent(), [2, { autoAccept: a3.as(Vt).autoAccept }];
        }
      });
    });
  }, t2.prototype.getDoNotDisturb = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2, r2, s3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return e2 = uo.of(this._iid), t3 = e2.sdkState, n2 = e2.requestQueue, r2 = new Bt({ userId: t3.userId }), [4, n2.send(r2)];
          case 1:
            return s3 = i.sent(), [2, s3.as(Jt).preference];
        }
      });
    });
  }, t2.prototype.setDoNotDisturb = function(e2, t3, s3, o2, a3, u2) {
    return void 0 === t3 && (t3 = 0), void 0 === s3 && (s3 = 0), void 0 === o2 && (o2 = 0), void 0 === a3 && (a3 = 0), void 0 === u2 && (u2 = ""), r(this, void 0, void 0, function() {
      var r2, c2, d2, l2, h;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(S("boolean", e2) && S("number", t3) && S("number", s3) && S("number", o2) && S("number", a3) && S("string", u2)).throw(b.invalidParameters), r2 = uo.of(this._iid), c2 = r2.sdkState, d2 = r2.requestQueue, l2 = new Zt({ userId: c2.userId, doNotDisturbOn: e2, startHour: t3, startMin: s3, endHour: o2, endMin: a3, timezone: u2 }), [4, d2.send(l2)];
          case 1:
            return h = i.sent(), [2, h.as($t2).preference];
        }
      });
    });
  }, t2.prototype.getSnoozePeriod = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2, r2, s3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return e2 = uo.of(this._iid), t3 = e2.sdkState, n2 = e2.requestQueue, r2 = new Xt({ userId: t3.userId }), [4, n2.send(r2)];
          case 1:
            return s3 = i.sent(), [2, s3.as(Yt).snoozePeriod];
        }
      });
    });
  }, t2.prototype.setSnoozePeriod = function(e2, t3, s3) {
    return void 0 === t3 && (t3 = 0), void 0 === s3 && (s3 = 0), r(this, void 0, void 0, function() {
      var r2, o2, a3, u2, c2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(S("boolean", e2) && S("number", t3) && S("number", s3)).throw(b.invalidParameters), r2 = uo.of(this._iid), o2 = r2.sdkState, a3 = r2.requestQueue, u2 = new en2({ userId: o2.userId, snoozeOn: e2, startTs: t3, endTs: s3 }), [4, a3.send(u2)];
          case 1:
            return c2 = i.sent(), [2, c2.as(tn2).snoozePeriod];
        }
      });
    });
  }, t2.prototype.getMyPushTokensByToken = function(e2, t3) {
    return r(this, void 0, void 0, function() {
      var r2, s3, o2, a3, u2, c2, d2, l2, h, f3, p2, v3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(S("string", e2) && T(f, t3)).throw(b.invalidParameters), r2 = uo.of(this._iid), s3 = r2.sdkState, o2 = r2.requestQueue, a3 = r2.sessionManager, u2 = new xt({ userId: s3.userId, type: t3, token: e2 }), [4, o2.send(u2)];
          case 1:
            c2 = i.sent(), d2 = c2.as(Ht).pushTokens;
            try {
              for (l2 = o(d2.deviceTokens), h = l2.next(); !h.done; h = l2.next())
                f3 = h.value, a3.setDeviceToken(d2.type, f3);
            } catch (e3) {
              p2 = { error: e3 };
            } finally {
              try {
                h && !h.done && (v3 = l2.return) && v3.call(l2);
              } finally {
                if (p2)
                  throw p2.error;
              }
            }
            return [4, a3.saveDeviceToken()];
          case 2:
            return i.sent(), [2, d2];
        }
      });
    });
  }, t2.prototype.getPushTriggerOption = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2, r2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return e2 = uo.of(this._iid), t3 = e2.sdkState, n2 = e2.requestQueue, r2 = new sn({ userId: t3.userId }), [4, n2.send(r2)];
          case 1:
            return [2, i.sent().as(on).pushTriggerOption];
        }
      });
    });
  }, t2.prototype.setPushTriggerOption = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2, s3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(T(_, e2)).throw(b.invalidParameters), t3 = uo.of(this._iid), n2 = t3.sdkState, r2 = t3.requestQueue, s3 = new an({ userId: n2.userId, pushTriggerOption: e2 }), [4, r2.send(s3)];
          case 1:
            return [2, i.sent().as(un).pushTriggerOption];
        }
      });
    });
  }, t2.prototype.getPushTemplate = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2, r2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return e2 = uo.of(this._iid), t3 = e2.sdkState, n2 = e2.requestQueue, r2 = new cn({ userId: t3.userId }), [4, n2.send(r2)];
          case 1:
            return [2, i.sent().as(dn).name];
        }
      });
    });
  }, t2.prototype.setPushTemplate = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2, s3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(T(E, e2)).throw(b.invalidParameters), t3 = uo.of(this._iid), n2 = t3.sdkState, r2 = t3.requestQueue, s3 = new ln({ userId: n2.userId, templateName: e2 }), [4, r2.send(s3)];
          case 1:
            return [2, i.sent().as(hn).name];
        }
      });
    });
  }, t2.prototype.blockUser = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, r2, s3, o2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(e2 instanceof ls || S("string", e2)).throw(b.invalidParameters), t3 = uo.of(this._iid), r2 = t3.sdkState, s3 = t3.requestQueue, o2 = new nn({ userId: r2.userId, blockedUserId: e2 instanceof ls ? e2.userId : e2 }), [4, s3.send(o2)];
          case 1:
            return i.sent(), [2];
        }
      });
    });
  }, t2.prototype.blockUserWithUserId = function(e2) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t3) {
        return [2, this.blockUser(e2)];
      });
    });
  }, t2.prototype.unblockUser = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, r2, s3, o2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(e2 instanceof ls || S("string", e2)).throw(b.invalidParameters), t3 = uo.of(this._iid), r2 = t3.sdkState, s3 = t3.requestQueue, o2 = new rn({ userId: r2.userId, unblockedUserId: e2 instanceof ls ? e2.userId : e2 }), [4, s3.send(o2)];
          case 1:
            return i.sent(), [2];
        }
      });
    });
  }, t2.prototype.unblockUserWithUserId = function(e2) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t3) {
        return [2, this.unblockUser(e2)];
      });
    });
  }, t2.prototype.getFriendChangeLogsByToken = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, r2, s3, o2, a3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(S("string", e2)).throw(b.invalidParameters), t3 = uo.of(this._iid), r2 = t3.sdkState, s3 = t3.requestQueue, o2 = new fn({ userId: r2.userId, token: e2 }), [4, s3.send(o2)];
          case 1:
            return a3 = i.sent(), [2, a3.as(pn).changelogs];
        }
      });
    });
  }, t2.prototype.getAllowFriendDiscovery = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2, r2, s3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return e2 = uo.of(this._iid), t3 = e2.sdkState, n2 = e2.requestQueue, r2 = new wn({ userId: t3.userId }), [4, n2.send(r2)];
          case 1:
            return s3 = i.sent(), [2, s3.as(kn).allowFriendDiscovery];
        }
      });
    });
  }, t2.prototype.setAllowFriendDiscovery = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, r2, s3, o2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(S("boolean", e2)).throw(b.invalidParameters), t3 = uo.of(this._iid), r2 = t3.sdkState, s3 = t3.requestQueue, o2 = new Sn({ userId: r2.userId, allowFriendDiscovery: e2 }), [4, s3.send(o2)];
          case 1:
            return i.sent(), [2, e2];
        }
      });
    });
  }, t2.prototype.uploadFriendDiscoveries = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2, s3, o2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return t3 = uo.of(this._iid), n2 = t3.sdkState, r2 = t3.requestQueue, s3 = new vn({ userId: n2.userId, discoveries: e2 }), [4, r2.send(s3)];
          case 1:
            return o2 = i.sent(), [2, o2.as(gn).friendDiscoveryRequestId];
        }
      });
    });
  }, t2.prototype.deleteFriendDiscovery = function(e2) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t3) {
        return [2, this.deleteFriendDiscoveries([e2])];
      });
    });
  }, t2.prototype.deleteFriendDiscoveries = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2, s3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(C("string", e2)).throw(b.invalidParameters), t3 = uo.of(this._iid), n2 = t3.sdkState, r2 = t3.requestQueue, s3 = new mn({ userId: n2.userId, discoveryKeys: e2 }), [4, r2.send(s3)];
          case 1:
            return i.sent(), [2];
        }
      });
    });
  }, t2.prototype.addFriends = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2, s3, o2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(C("string", e2)).throw(b.invalidParameters), t3 = uo.of(this._iid), n2 = t3.sdkState, r2 = t3.requestQueue, s3 = new bn({ userId: n2.userId, userIds: e2 }), [4, r2.send(s3)];
          case 1:
            return o2 = i.sent(), [2, o2.as(_n).users];
        }
      });
    });
  }, t2.prototype.deleteFriend = function(e2) {
    return r(this, void 0, void 0, function() {
      return s(this, function(t3) {
        return [2, this.deleteFriends([e2])];
      });
    });
  }, t2.prototype.deleteFriends = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2, s3;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return cs(C("string", e2)).throw(b.invalidParameters), t3 = uo.of(this._iid), n2 = t3.sdkState, r2 = t3.requestQueue, s3 = new yn2({ userId: n2.userId, userIds: e2 }), [4, r2.send(s3)];
          case 1:
            return i.sent(), [2];
        }
      });
    });
  }, t2.prototype.getAllEmoji = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2;
      return s(this, function(r2) {
        switch (r2.label) {
          case 0:
            return e2 = uo.of(this._iid).requestQueue, t3 = new Cn(), [4, e2.send(t3)];
          case 1:
            return n2 = r2.sent(), [2, n2.as(En).emojiContainer];
        }
      });
    });
  }, t2.prototype.getEmojiCategory = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return t3 = uo.of(this._iid).requestQueue, n2 = new Tn({ categoryId: e2 }), [4, t3.send(n2)];
          case 1:
            return r2 = i.sent(), [2, r2.as(Pn).emojiCategory];
        }
      });
    });
  }, t2.prototype.getEmoji = function(e2) {
    return r(this, void 0, void 0, function() {
      var t3, n2, r2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return t3 = uo.of(this._iid).requestQueue, n2 = new Dn({ key: e2 }), [4, t3.send(n2)];
          case 1:
            return r2 = i.sent(), [2, r2.as(Un2).emoji];
        }
      });
    });
  }, t2.prototype.getUIKitConfiguration = function() {
    return r(this, void 0, void 0, function() {
      var e2, t3, n2, r2;
      return s(this, function(i) {
        switch (i.label) {
          case 0:
            return e2 = uo.of(this._iid), cs(e2.hasExtension("sb_uikit")).throw(b.notSupportedError), t3 = e2.requestQueue, n2 = new On2(), [4, t3.send(n2)];
          case 1:
            return r2 = i.sent(), [2, r2.as(An).uikitConfiguration];
        }
      });
    });
  }, t2.prototype.getReportCategoryInfoList = function() {
    return r(this, void 0, void 0, function() {
      return s(this, function(e2) {
        switch (e2.label) {
          case 0:
            return [4, uo.of(this._iid).reportCategoryManager.categories()];
          case 1:
            return [2, e2.sent()];
        }
      });
    });
  }, t2;
}();

export {
  St,
  It,
  Ct,
  Ln
};
//# sourceMappingURL=chunk-DHPKMF2M.js.map
